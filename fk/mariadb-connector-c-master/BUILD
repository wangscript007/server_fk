
# need to install openssl library
cc_library(
	name = 'mariadbclient',
	srcs = [
		'plugins/auth/my_auth.c',
		'plugins/auth/old_password.c',
		'plugins/pvio/pvio_socket.c',
		'libmariadb/ma_array.c',
		'libmariadb/ma_charset.c',
		'libmariadb/ma_hash.c',
		'libmariadb/ma_net.c',
		'libmariadb/mariadb_charset.c',
		'libmariadb/ma_time.c',
		'libmariadb/ma_default.c',
		'libmariadb/ma_errmsg.c',
		'libmariadb/mariadb_lib.c',
		'libmariadb/ma_list.c',
		'libmariadb/ma_pvio.c',
		'libmariadb/ma_tls.c',
		'libmariadb/ma_alloc.c',
		'libmariadb/ma_compress.c',
		'libmariadb/ma_init.c',
		'libmariadb/ma_password.c',
		'libmariadb/ma_ll2str.c',
		'libmariadb/ma_sha1.c',
		'libmariadb/mariadb_stmt.c',
		'libmariadb/ma_loaddata.c',
		'libmariadb/ma_stmt_codec.c',
		'libmariadb/ma_string.c',
		'libmariadb/ma_dtoa.c',
		'libmariadb/ma_client_plugin.c',
		'libmariadb/ma_io.c',
		'libmariadb/secure/openssl.c',
		'zlib/adler32.c',
		'zlib/compress.c',
		'zlib/crc32.c',
		'zlib/deflate.c',
		'zlib/gzclose.c',
		'zlib/gzlib.c',
		'zlib/gzread.c',
		'zlib/gzwrite.c',
		'zlib/infback.c',
		'zlib/inffast.c',
		'zlib/inflate.c',
		'zlib/inftrees.c',
		'zlib/trees.c',
		'zlib/uncompr.c',
		'zlib/zutil.c',
		'libmariadb/mariadb_dyncol.c',
		'libmariadb/mariadb_async.c',
		'libmariadb/ma_context.c',
	],
	incs = [
		'include',
		'libmariadb',
		'zlib',
		'plugins/auth',
		'plugins/pvio',
		'win-iconv'
	],
	defs = [
		'ENABLED_LOCAL_INFILE', 
		'THREAD',
		'LIBMARIADB',
		'HAVE_COMPRESS',
		'HAVE_TLS',
	],
	deps = [
        '#pthread',
		'#dl',
		'#libiconv',
		'#libssl',
		'#libcrypto',
    ],
	warning = 'no',
)

